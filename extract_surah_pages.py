import fitz
import os
print("Saving file in:", os.getcwd())

pdf_file = "quran.pdf"
doc = fitz.open(pdf_file)

# 114 Surah names in Malayalam (reference list)
surah_names = [
"അല്‍ഫാതിഹഃ","അല്‍ബഖറഃ","ആലുഇംറാന്‍","അന്നിസാഃ","അല്‍മായിദഃ","അല്‍അന്‍ആം",
"അല്‍അറാഫ്","അല്‍അന്‍ഫാല്‍","അത്തൗബഃ","യൂനുസ്","ഹൂദ്","യൂസുഫ്","അര്‍റഅ്ദ്",
"ഇബ്രാഹീം","അല്‍ഹിജ്‍ര്‍","അന്നഹ്‍ല്‍","ബനീ ഇസ്രായീല്‍","അല്‍കഹ്‍ഫ്","മര്‍യ്യം",
"ത്വാഹാ","അല്‍അന്‍ബിയാഃ","അല്‍ഹജ്‍ജ്","അല്‍മുമിനൂന്‍","അന്നൂര്‍","അല്‍ഫുര്‍ഖാന്‍",
"അഷ്ശുഅറാഃ","അന്നമ്‍ല്‍","അല്‍ഖസ്വസ്","അല്‍അന്‍കബൂത്","അര്‍റൂം","ലുഖ്‍മാന്‍",
"അസ്സജ്ദഃ","അല്‍അഹ്‍സാബ്","സബാഃ","ഫാത്വിര്‍","യാസീന്‍","അസ്സാഫ്ഫാത്ത്","സാഡ്",
"അസ്‌സുമര്‍","അല്‍ഘാഫിര്‍","ഫുസ്വ്വിലത്","അശ്ശൂറാഃ","അസ്‌സുഖ്‍റുഫ്","അദ്ദുഖാന്‍",
"അല്‍ജാചിയഃ","അല്‍അഹ്‌കാഫ്","മുഹമ്മദ്","അല്‍ഫത്ഹ്","അല്‍ഹുജുറാത്","ഖാഫ്",
"അദ്ദാരിയാത്ത്","അത്തൂര്‍","അന്നജ്മ്","അല്‍ഖമര്‍","അര്‍റഹ്‍മാന്‍","അല്‍വാഖിഅഃ",
"അല്‍ഹദീദ്","അല്‍മുജാദലഃ","അല്‍ഹഷര്‍","അല്‍മുംതഹനഃ","അസ്സഫ്ഫ്","അല്‍ജുമുഅഃ",
"അല്‍മുനാഫിഖൂന്‍","അത്തഗാബുന്‍","അത്തലാഖ്","അത്തഹ്‌റീം","അല്‍മുല്‍ക്ക്",
"അല്‍ഖലമ്","അല്‍ഹാഖ്ഖഃ","അല്‍മഅാരിജ്","നൂഹ്","അല്‍ജിന്ന്","അല്‍മുസ്സമ്മിര്‍",
"അല്‍മുദ്ദസ്സിര്‍","അല്‍ഖിയാമഃ","അല്‍ഇന്‍സാന്‍","അല്‍മുര്‍സലാത്ത്","അന്നബഃ",
"അന്നാസിഅത്ത്","അബസ","അത്തക്വീര്‍","അല്‍ഇന്‍ഫിത്വാര്‍","അല്‍മുത്തഫ്ഫിഫൂന്‍",
"അല്‍ഇന്‍ഷിഖാഖ്","അല്‍ബുരൂജ്","അത്ത്വാരിഖ്","അല്‍അഌലാ","അല്‍ഘാഷിയഃ","അല്‍ഫജ്റ്",
"അല്‍ബലദ്","അശ്ശംസ്","അല്ലൈല്‍","അദ്ദുഹാഃ","അശ്ശറ്ഹ്","അത്തീന്‍","അല്‍അലഖ്",
"അല്‍ഖദര്‍","അല്‍ബയ്യിനഃ","അല്‍സല്‍സലഃ","അല്‍ആദിയാത്ത്","അല്‍ഖാരിഅഃ","അത്തകാസുര്‍",
"അല്‍അസ്വര്‍","അല്‍ഹുമസഃ","അല്‍ഫീല്‍","ഖുറൈഷ്","അല്‍മാഊന്‍","അല്‍കൗഥര്‍",
"അല്‍കാഫിരൂന്‍","അന്നസ്വര്‍","അല്‍ഇഖ്‌ലാസ്സ്","അല്‍ഫലഖ്","അന്നാസ്"
]

surah_pages = {}

for i, name in enumerate(surah_names, start=1):
    found = False
    for page_num, page in enumerate(doc, start=1):
        text = page.get_text("text")
        if name in text:
            surah_pages[name] = page_num
            found = True
            break
    if not found:
        surah_pages[name] = "Not found"

# Save to file
with open("surah_pages.txt", "w", encoding="utf-8") as f:
    for name, pg in surah_pages.items():
        f.write(f"{name} -> {pg}\n")
print("Saving file in:", os.getcwd())

print(f"✅ Done. Saved surah_pages.txt with {len(surah_pages)} surahs.")
